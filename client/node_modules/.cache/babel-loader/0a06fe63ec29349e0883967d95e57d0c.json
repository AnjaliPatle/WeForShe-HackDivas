{"ast":null,"code":"var _jsxFileName = \"E:\\\\cuckoo-master\\\\client\\\\src\\\\App.js\";\nimport React, { useEffect, useState, useRef, Suspense } from 'react';\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport Rodal from 'rodal';\nimport { Howl } from 'howler';\nimport 'rodal/lib/rodal.css';\nimport camera from \"./Icons/camera.svg\";\nimport camerastop from \"./Icons/camera-stop.svg\";\nimport microphone from \"./Icons/microphone.svg\";\nimport microphonestop from \"./Icons/microphone-stop.svg\";\nimport share from \"./Icons/share.svg\";\nimport hangup from \"./Icons/hang-up.svg\";\nimport fullscreen from \"./Icons/fullscreen.svg\";\nimport minimize from \"./Icons/minimize.svg\";\nimport ringtone from './Sounds/ringtone.mp3';\nconst Watermark = React.lazy(() => import('./Components/Watermark/Watermark'));\nconst ringtoneSound = new Howl({\n  src: [ringtone],\n  loop: true,\n  preload: true\n});\n\nfunction App(props) {\n  const [yourID, setYourID] = useState(\"\");\n  const [users, setUsers] = useState({});\n  const [stream, setStream] = useState();\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callingFriend, setCallingFriend] = useState(false);\n  const [callerSignal, setCallerSignal] = useState();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [callRejected, setCallRejected] = useState(false);\n  const [receiverID, setReceiverID] = useState('');\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalMessage, setModalMessage] = useState('');\n  const [audioMuted, setAudioMuted] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(false);\n  const [isfullscreen, setFullscreen] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const socket = useRef();\n  const myPeer = useRef();\n  let landingHTML = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-window\",\n    style: {\n      transform: props.open ? 'translateX(0)' : 'translateX(100%)',\n      transition: \"all 1s linear\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrow\",\n    style: {\n      left: props.open ? '-40px' : '-80px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, props.open ? \"Close Call\" : \"Open Call Window\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"u-margin-top-xxlarge u-margin-bottom-xxlarge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"o-wrapper-l\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hero flex flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"welcomeText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Anonymous Video Calls\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"descriptionText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, \"across the world for free\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"actionText\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"Who do you want to call, \", /*#__PURE__*/React.createElement(\"span\", {\n    className: copied ? \"username highlight copied\" : \"username highlight\",\n    onClick: () => {\n      showCopiedMessage();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 70\n    }\n  }, yourID), \"?\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"callBox flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Friend ID\",\n    value: receiverID,\n    onChange: e => setReceiverID(e.target.value),\n    className: \"form-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => callPeer(receiverID.toLowerCase().trim()),\n    className: \"primaryButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Call\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, \"To call your friend, ask them to open Cuckoo in their browser. \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 80\n    }\n  }), \"Send your username (\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 37\n    }\n  }, yourID), \") and wait for their call \", /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 105\n    }\n  }, \"OR\"), \" enter their username and hit call!\"))))));\n  useEffect(() => {\n    socket.current = io.connect(\"/\");\n    socket.current.on(\"yourID\", id => {\n      setYourID(id);\n    });\n    socket.current.on(\"allUsers\", users => {\n      setUsers(users);\n    });\n    socket.current.on(\"hey\", data => {\n      setReceivingCall(true);\n      ringtoneSound.play();\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    });\n  }, []);\n\n  function callPeer(id) {\n    if (id !== '' && users[id] && id !== yourID) {\n      navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      }).then(stream => {\n        setStream(stream);\n        setCallingFriend(true);\n        setCaller(id);\n\n        if (userVideo.current) {\n          userVideo.current.srcObject = stream;\n        }\n\n        const peer = new Peer({\n          initiator: true,\n          trickle: false,\n          config: {\n            iceServers: [// {\n            //     urls: \"stun:numb.viagenie.ca\",\n            //     username: \"sultan1640@gmail.com\",\n            //     credential: \"98376683\"\n            // },\n            // {\n            //     urls: \"turn:numb.viagenie.ca\",\n            //     username: \"sultan1640@gmail.com\",\n            //     credential: \"98376683\"\n            // }\n            {\n              url: 'stun:stun01.sipphone.com'\n            }, {\n              url: 'stun:stun.ekiga.net'\n            }, {\n              url: 'stun:stun.fwdnet.net'\n            }, {\n              url: 'stun:stun.ideasip.com'\n            }, {\n              url: 'stun:stun.iptel.org'\n            }, {\n              url: 'stun:stun.rixtelecom.se'\n            }, {\n              url: 'stun:stun.schlund.de'\n            }, {\n              url: 'stun:stun.l.google.com:19302'\n            }, {\n              url: 'stun:stun1.l.google.com:19302'\n            }, {\n              url: 'stun:stun2.l.google.com:19302'\n            }, {\n              url: 'stun:stun3.l.google.com:19302'\n            }, {\n              url: 'stun:stun4.l.google.com:19302'\n            }, {\n              url: 'stun:stunserver.org'\n            }, {\n              url: 'stun:stun.softjoys.com'\n            }, {\n              url: 'stun:stun.voiparound.com'\n            }, {\n              url: 'stun:stun.voipbuster.com'\n            }, {\n              url: 'stun:stun.voipstunt.com'\n            }, {\n              url: 'stun:stun.voxgratia.org'\n            }, {\n              url: 'stun:stun.xten.com'\n            }, {\n              url: 'turn:numb.viagenie.ca',\n              credential: 'muazkh',\n              username: 'webrtc@live.com'\n            }, {\n              url: 'turn:192.158.29.39:3478?transport=udp',\n              credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\n              username: '28224511:1379330808'\n            }, {\n              url: 'turn:192.158.29.39:3478?transport=tcp',\n              credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\n              username: '28224511:1379330808'\n            }]\n          },\n          stream: stream\n        });\n        myPeer.current = peer;\n        peer.on(\"signal\", data => {\n          socket.current.emit(\"callUser\", {\n            userToCall: id,\n            signalData: data,\n            from: yourID\n          });\n        });\n        peer.on(\"stream\", stream => {\n          if (partnerVideo.current) {\n            partnerVideo.current.srcObject = stream;\n          }\n        });\n        peer.on('error', err => {\n          endCall();\n        });\n        socket.current.on(\"callAccepted\", signal => {\n          setCallAccepted(true);\n          peer.signal(signal);\n        });\n        socket.current.on('close', () => {\n          window.location.reload();\n        });\n        socket.current.on('rejected', () => {\n          window.location.reload();\n        });\n      }).catch(() => {\n        setModalMessage('You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.');\n        setModalVisible(true);\n      });\n    } else {\n      setModalMessage('We think the username entered is wrong. Please check again and retry!');\n      setModalVisible(true);\n      return;\n    }\n  }\n\n  function acceptCall() {\n    ringtoneSound.unload();\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      setStream(stream);\n\n      if (userVideo.current) {\n        userVideo.current.srcObject = stream;\n      }\n\n      setCallAccepted(true);\n      const peer = new Peer({\n        initiator: false,\n        trickle: false,\n        stream: stream\n      });\n      myPeer.current = peer;\n      peer.on(\"signal\", data => {\n        socket.current.emit(\"acceptCall\", {\n          signal: data,\n          to: caller\n        });\n      });\n      peer.on(\"stream\", stream => {\n        partnerVideo.current.srcObject = stream;\n      });\n      peer.on('error', err => {\n        endCall();\n      });\n      peer.signal(callerSignal);\n      socket.current.on('close', () => {\n        window.location.reload();\n      });\n    }).catch(() => {\n      setModalMessage('You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.');\n      setModalVisible(true);\n    });\n  }\n\n  function rejectCall() {\n    ringtoneSound.unload();\n    setCallRejected(true);\n    socket.current.emit('rejected', {\n      to: caller\n    });\n    window.location.reload();\n  }\n\n  function endCall() {\n    myPeer.current.destroy();\n    socket.current.emit('close', {\n      to: caller\n    });\n    window.location.reload();\n  }\n\n  function shareScreen() {\n    navigator.mediaDevices.getDisplayMedia({\n      cursor: true\n    }).then(screenStream => {\n      myPeer.current.replaceTrack(stream.getVideoTracks()[0], screenStream.getVideoTracks()[0], stream);\n      userVideo.current.srcObject = screenStream;\n\n      screenStream.getTracks()[0].onended = () => {\n        myPeer.current.replaceTrack(screenStream.getVideoTracks()[0], stream.getVideoTracks()[0], stream);\n        userVideo.current.srcObject = stream;\n      };\n    });\n  }\n\n  function toggleMuteAudio() {\n    if (stream) {\n      setAudioMuted(!audioMuted);\n      stream.getAudioTracks()[0].enabled = audioMuted;\n    }\n  }\n\n  function toggleMuteVideo() {\n    if (stream) {\n      setVideoMuted(!videoMuted);\n      stream.getVideoTracks()[0].enabled = videoMuted;\n    }\n  }\n\n  function renderLanding() {\n    if (!callRejected && !callAccepted && !callingFriend) return 'block';\n    return 'none';\n  }\n\n  function renderCall() {\n    if (!callRejected && !callAccepted && !callingFriend) return 'none';\n    return 'block';\n  }\n\n  function isMobileDevice() {\n    let check = false;\n\n    (function (a) {\n      if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n    })(navigator.userAgent || navigator.vendor || window.opera);\n\n    return check;\n  }\n\n  ;\n\n  function showCopiedMessage() {\n    navigator.clipboard.writeText(yourID);\n    setCopied(true);\n    setInterval(() => {\n      setCopied(false);\n    }, 1000);\n  }\n\n  let UserVideo;\n\n  if (stream) {\n    UserVideo = /*#__PURE__*/React.createElement(\"video\", {\n      className: \"userVideo\",\n      playsInline: true,\n      muted: true,\n      ref: userVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 7\n      }\n    });\n  }\n\n  let PartnerVideo;\n\n  if (callAccepted && isfullscreen) {\n    PartnerVideo = /*#__PURE__*/React.createElement(\"video\", {\n      className: \"partnerVideo cover\",\n      playsInline: true,\n      ref: partnerVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 7\n      }\n    });\n  } else if (callAccepted && !isfullscreen) {\n    PartnerVideo = /*#__PURE__*/React.createElement(\"video\", {\n      className: \"partnerVideo\",\n      playsInline: true,\n      ref: partnerVideo,\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 7\n      }\n    });\n  }\n\n  let incomingCall;\n\n  if (receivingCall && !callAccepted && !callRejected) {\n    incomingCall = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"incomingCallContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"incomingCall flex flex-column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"callerID\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 16\n      }\n    }, caller), \" is calling you!\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"incomingCallButtons flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      name: \"accept\",\n      className: \"alertButtonPrimary\",\n      onClick: () => acceptCall(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }\n    }, \"Accept\"), /*#__PURE__*/React.createElement(\"button\", {\n      name: \"reject\",\n      className: \"alertButtonSecondary\",\n      onClick: () => rejectCall(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }\n    }, \"Reject\"))));\n  }\n\n  let audioControl;\n\n  if (audioMuted) {\n    audioControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteAudio(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: microphonestop,\n      alt: \"Unmute audio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 7\n      }\n    }));\n  } else {\n    audioControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteAudio(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: microphone,\n      alt: \"Mute audio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  let videoControl;\n\n  if (videoMuted) {\n    videoControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteVideo(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: camerastop,\n      alt: \"Resume video\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 7\n      }\n    }));\n  } else {\n    videoControl = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => toggleMuteVideo(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: camera,\n      alt: \"Stop audio\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  let screenShare = /*#__PURE__*/React.createElement(\"span\", {\n    className: \"iconContainer\",\n    onClick: () => shareScreen(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: share,\n    alt: \"Share screen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 5\n    }\n  }));\n\n  if (isMobileDevice()) {\n    screenShare = /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n  let hangUp = /*#__PURE__*/React.createElement(\"span\", {\n    className: \"iconContainer\",\n    onClick: () => endCall(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: hangup,\n    alt: \"End call\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 5\n    }\n  }));\n  let fullscreenButton;\n\n  if (isfullscreen) {\n    fullscreenButton = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => {\n        setFullscreen(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 22\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: minimize,\n      alt: \"fullscreen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 7\n      }\n    }));\n  } else {\n    fullscreenButton = /*#__PURE__*/React.createElement(\"span\", {\n      className: \"iconContainer\",\n      onClick: () => {\n        setFullscreen(true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 22\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: fullscreen,\n      alt: \"fullscreen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: renderLanding()\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }\n  }, landingHTML, /*#__PURE__*/React.createElement(Rodal, {\n    visible: modalVisible,\n    onClose: () => setModalVisible(false),\n    width: 20,\n    height: 5,\n    measure: 'em',\n    closeOnEsc: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 11\n    }\n  }, modalMessage)), incomingCall), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"callContainer\",\n    style: {\n      display: renderCall()\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 29\n      }\n    }, \"Loading...\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Watermark, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"partnerVideoContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 9\n    }\n  }, PartnerVideo), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"userVideoContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }\n  }, UserVideo), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"controlsContainer flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 9\n    }\n  }, audioControl, videoControl, screenShare, fullscreenButton, hangUp)));\n}\n\nexport default App;","map":{"version":3,"sources":["E:/cuckoo-master/client/src/App.js"],"names":["React","useEffect","useState","useRef","Suspense","io","Peer","Rodal","Howl","ringtone","Watermark","lazy","ringtoneSound","src","loop","preload","App","props","yourID","setYourID","users","setUsers","stream","setStream","receivingCall","setReceivingCall","caller","setCaller","callingFriend","setCallingFriend","callerSignal","setCallerSignal","callAccepted","setCallAccepted","callRejected","setCallRejected","receiverID","setReceiverID","modalVisible","setModalVisible","modalMessage","setModalMessage","audioMuted","setAudioMuted","videoMuted","setVideoMuted","isfullscreen","setFullscreen","copied","setCopied","userVideo","partnerVideo","socket","myPeer","landingHTML","transform","open","transition","left","showCopiedMessage","e","target","value","callPeer","toLowerCase","trim","fontWeight","current","connect","on","id","data","play","from","signal","navigator","mediaDevices","getUserMedia","video","audio","then","srcObject","peer","initiator","trickle","config","iceServers","url","credential","username","emit","userToCall","signalData","err","endCall","window","location","reload","catch","acceptCall","unload","to","rejectCall","destroy","shareScreen","getDisplayMedia","cursor","screenStream","replaceTrack","getVideoTracks","getTracks","onended","toggleMuteAudio","getAudioTracks","enabled","toggleMuteVideo","renderLanding","renderCall","isMobileDevice","check","a","test","substr","userAgent","vendor","opera","clipboard","writeText","setInterval","UserVideo","PartnerVideo","incomingCall","audioControl","microphonestop","microphone","videoControl","camerastop","camera","screenShare","share","hangUp","hangup","fullscreenButton","minimize","fullscreen","display"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, Suspense } from 'react';\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport Rodal from 'rodal'\nimport {Howl} from 'howler'\n\nimport  'rodal/lib/rodal.css'\n\nimport camera from './Icons/camera.svg'\nimport camerastop from './Icons/camera-stop.svg'\nimport microphone from './Icons/microphone.svg'\nimport microphonestop from './Icons/microphone-stop.svg'\nimport share from './Icons/share.svg'\nimport hangup from './Icons/hang-up.svg'\nimport fullscreen from './Icons/fullscreen.svg'\nimport minimize from './Icons/minimize.svg'\nimport ringtone from './Sounds/ringtone.mp3'\n\nconst Watermark = React.lazy(()=>import('./Components/Watermark/Watermark'))\n\nconst ringtoneSound = new Howl({\n  src: [ringtone],\n  loop: true,\n  preload: true\n})\n\nfunction App(props) {\n  const [yourID, setYourID] = useState(\"\");\n  const [users, setUsers] = useState({});\n  const [stream, setStream] = useState();\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callingFriend, setCallingFriend] = useState(false);\n  const [callerSignal, setCallerSignal] = useState();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [callRejected, setCallRejected] = useState(false);\n  const [receiverID, setReceiverID] = useState('')\n  const [modalVisible, setModalVisible] = useState(false)\n  const [modalMessage, setModalMessage] = useState('')\n  const [audioMuted, setAudioMuted] = useState(false)\n  const [videoMuted, setVideoMuted] = useState(false)\n  const [isfullscreen, setFullscreen] = useState(false)\n  const [copied, setCopied] = useState(false)\n  \n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const socket = useRef();\n  const myPeer=useRef();\n\n  let landingHTML=<>\n    <div className=\"app-window\" style={{transform: props.open ? 'translateX(0)' : 'translateX(100%)', transition: \"all 1s linear\"}}>\n    <div className=\"arrow\" style={{left:props.open?'-40px':'-80px'}}>{props.open?\"Close Call\":\"Open Call Window\"}</div>\n      <div className=\"u-margin-top-xxlarge u-margin-bottom-xxlarge\">\n    <div className=\"o-wrapper-l\">\n        <div className=\"hero flex flex-column\">\n            <div>\n                <div className=\"welcomeText\">\n                    Anonymous Video Calls\n                </div>\n                <div className=\"descriptionText\">\n                    across the world for free\n                </div>\n            </div>\n            <div>\n                <div className=\"actionText\">Who do you want to call, <span className={copied?\"username highlight copied\":\"username highlight\"} onClick={()=>{showCopiedMessage()}}>{yourID}</span>?</div>\n            </div>\n            <div className=\"callBox flex\">\n                <input type=\"text\" placeholder=\"Friend ID\" value={receiverID} onChange={e => setReceiverID(e.target.value)} className=\"form-input\"/>\n                <button onClick={() => callPeer(receiverID.toLowerCase().trim())} className=\"primaryButton\">Call</button>\n            </div>\n            <div>\n                To call your friend, ask them to open Cuckoo in their browser. <br/>\n                Send your username (<span className=\"username\">{yourID}</span>) and wait for their call <span style={{fontWeight: 600}}>OR</span> enter their username and hit call!\n            </div>\n        </div>\n    </div>\n    </div>\n    </div>\n  </>\n\n  useEffect(() => {\n    socket.current = io.connect(\"/\");\n    \n\n    socket.current.on(\"yourID\", (id) => {\n      setYourID(id);\n    })\n    socket.current.on(\"allUsers\", (users) => {\n      setUsers(users);\n    })\n\n    socket.current.on(\"hey\", (data) => {\n      setReceivingCall(true);\n      ringtoneSound.play();\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    })\n  }, []);\n\n  function callPeer(id) {\n    if(id!=='' && users[id] && id!==yourID){\n      navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {\n        setStream(stream);\n        setCallingFriend(true)\n        setCaller(id)\n        if (userVideo.current) {\n          userVideo.current.srcObject = stream;\n        }\n        const peer = new Peer({\n          initiator: true,\n          trickle: false,\n          config: {\n    \n            iceServers: [\n                // {\n                //     urls: \"stun:numb.viagenie.ca\",\n                //     username: \"sultan1640@gmail.com\",\n                //     credential: \"98376683\"\n                // },\n                // {\n                //     urls: \"turn:numb.viagenie.ca\",\n                //     username: \"sultan1640@gmail.com\",\n                //     credential: \"98376683\"\n                // }\n                {url:'stun:stun01.sipphone.com'},\n                {url:'stun:stun.ekiga.net'},\n                {url:'stun:stun.fwdnet.net'},\n                {url:'stun:stun.ideasip.com'},\n                {url:'stun:stun.iptel.org'},\n                {url:'stun:stun.rixtelecom.se'},\n                {url:'stun:stun.schlund.de'},\n                {url:'stun:stun.l.google.com:19302'},\n                {url:'stun:stun1.l.google.com:19302'},\n                {url:'stun:stun2.l.google.com:19302'},\n                {url:'stun:stun3.l.google.com:19302'},\n                {url:'stun:stun4.l.google.com:19302'},\n                {url:'stun:stunserver.org'},\n                {url:'stun:stun.softjoys.com'},\n                {url:'stun:stun.voiparound.com'},\n                {url:'stun:stun.voipbuster.com'},\n                {url:'stun:stun.voipstunt.com'},\n                {url:'stun:stun.voxgratia.org'},\n                {url:'stun:stun.xten.com'},\n                {\n                url: 'turn:numb.viagenie.ca',\n                credential: 'muazkh',\n                username: 'webrtc@live.com'\n                },\n                {\n                url: 'turn:192.158.29.39:3478?transport=udp',\n                credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\n                username: '28224511:1379330808'\n                },\n                {\n                url: 'turn:192.158.29.39:3478?transport=tcp',\n                credential: 'JZEOEt2V3Qb0y27GRntt2u2PAYA=',\n                username: '28224511:1379330808'\n                }\n            ]\n        },\n          stream: stream,\n        });\n\n        myPeer.current=peer;\n    \n        peer.on(\"signal\", data => {\n          socket.current.emit(\"callUser\", { userToCall: id, signalData: data, from: yourID })\n        })\n    \n        peer.on(\"stream\", stream => {\n          if (partnerVideo.current) {\n            partnerVideo.current.srcObject = stream;\n          }\n        });\n\n        peer.on('error', (err)=>{\n          endCall()\n        })\n    \n        socket.current.on(\"callAccepted\", signal => {\n          setCallAccepted(true);\n          peer.signal(signal);\n        })\n\n        socket.current.on('close', ()=>{\n          window.location.reload()\n        })\n  \n        socket.current.on('rejected', ()=>{\n          window.location.reload()\n        })\n      })\n      .catch(()=>{\n        setModalMessage('You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.')\n        setModalVisible(true)\n      })\n    } else {\n      setModalMessage('We think the username entered is wrong. Please check again and retry!')\n      setModalVisible(true)\n      return\n    }\n  }\n\n  function acceptCall() {\n    ringtoneSound.unload();\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then(stream => {\n      setStream(stream);\n      if (userVideo.current) {\n        userVideo.current.srcObject = stream;\n      }\n      setCallAccepted(true);\n      const peer = new Peer({\n        initiator: false,\n        trickle: false,\n        stream: stream,\n      });\n\n      myPeer.current=peer\n\n      peer.on(\"signal\", data => {\n        socket.current.emit(\"acceptCall\", { signal: data, to: caller })\n      })\n\n      peer.on(\"stream\", stream => {\n        partnerVideo.current.srcObject = stream;\n      });\n\n      peer.on('error', (err)=>{\n        endCall()\n      })\n\n      peer.signal(callerSignal);\n\n      socket.current.on('close', ()=>{\n        window.location.reload()\n      })\n    })\n    .catch(()=>{\n      setModalMessage('You cannot place/ receive a call without granting video and audio permissions! Please change your settings to use Cuckoo.')\n      setModalVisible(true)\n    })\n  }\n\n  function rejectCall(){\n    ringtoneSound.unload();\n    setCallRejected(true)\n    socket.current.emit('rejected', {to:caller})\n    window.location.reload()\n  }\n\n  function endCall(){\n    myPeer.current.destroy()\n    socket.current.emit('close',{to:caller})\n    window.location.reload()\n  }\n\n  function shareScreen(){\n    navigator.mediaDevices.getDisplayMedia({cursor:true})\n    .then(screenStream=>{\n      myPeer.current.replaceTrack(stream.getVideoTracks()[0],screenStream.getVideoTracks()[0],stream)\n      userVideo.current.srcObject=screenStream\n      screenStream.getTracks()[0].onended = () =>{\n      myPeer.current.replaceTrack(screenStream.getVideoTracks()[0],stream.getVideoTracks()[0],stream)\n      userVideo.current.srcObject=stream\n      }\n    })\n  }\n\n  function toggleMuteAudio(){\n    if(stream){\n      setAudioMuted(!audioMuted)\n      stream.getAudioTracks()[0].enabled = audioMuted\n    }\n  }\n\n  function toggleMuteVideo(){\n    if(stream){\n      setVideoMuted(!videoMuted)\n      stream.getVideoTracks()[0].enabled = videoMuted\n    }\n  }\n\n  function renderLanding() {\n    if(!callRejected && !callAccepted && !callingFriend)\n      return 'block'\n    return 'none'\n  }\n\n  function renderCall() {\n    if(!callRejected && !callAccepted && !callingFriend)\n      return 'none'\n    return 'block'\n  }\n\n  function isMobileDevice() {\n    let check = false;\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\n    return check;\n  };\n\n  function showCopiedMessage(){\n    navigator.clipboard.writeText(yourID)\n    setCopied(true)\n    setInterval(()=>{\n      setCopied(false)\n    },1000)\n  }\n\n  let UserVideo;\n  if (stream) {\n    UserVideo = (\n      <video className=\"userVideo\" playsInline muted ref={userVideo} autoPlay />\n    );\n  }\n\n  let PartnerVideo;\n  if (callAccepted && isfullscreen) {\n    PartnerVideo = (\n      <video className=\"partnerVideo cover\" playsInline ref={partnerVideo} autoPlay />\n    );\n  } else if (callAccepted && !isfullscreen){\n    PartnerVideo = (\n      <video className=\"partnerVideo\" playsInline ref={partnerVideo} autoPlay />\n    );\n  }\n\n  let incomingCall;\n  if (receivingCall && !callAccepted && !callRejected) {\n    incomingCall = (\n      <div className=\"incomingCallContainer\">\n        <div className=\"incomingCall flex flex-column\">\n          <div><span className=\"callerID\">{caller}</span> is calling you!</div>\n          <div className=\"incomingCallButtons flex\">\n          <button name=\"accept\" className=\"alertButtonPrimary\" onClick={()=>acceptCall()}>Accept</button>\n          <button name=\"reject\" className=\"alertButtonSecondary\" onClick={()=>rejectCall()}>Reject</button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  let audioControl;\n  if(audioMuted){\n    audioControl=<span className=\"iconContainer\" onClick={()=>toggleMuteAudio()}>\n      <img src={microphonestop} alt=\"Unmute audio\"/>\n    </span>\n  } else {\n    audioControl=<span className=\"iconContainer\" onClick={()=>toggleMuteAudio()}>\n      <img src={microphone} alt=\"Mute audio\"/>\n    </span>\n  }\n\n  let videoControl;\n  if(videoMuted){\n    videoControl=<span className=\"iconContainer\" onClick={()=>toggleMuteVideo()}>\n      <img src={camerastop} alt=\"Resume video\"/>\n    </span>\n  } else {\n    videoControl=<span className=\"iconContainer\" onClick={()=>toggleMuteVideo()}>\n      <img src={camera} alt=\"Stop audio\"/>\n    </span>\n  }\n\n  let screenShare=<span className=\"iconContainer\" onClick={()=>shareScreen()}>\n    <img src={share} alt=\"Share screen\"/>\n  </span>\n  if(isMobileDevice()){\n    screenShare=<></>\n  }\n\n  let hangUp=<span className=\"iconContainer\" onClick={()=>endCall()}>\n    <img src={hangup} alt=\"End call\"/>\n  </span>\n\n  let fullscreenButton;  \n  if(isfullscreen){\n    fullscreenButton=<span className=\"iconContainer\" onClick={()=>{setFullscreen(false)}}>\n      <img src={minimize} alt=\"fullscreen\"/>\n    </span>\n  } else {\n    fullscreenButton=<span className=\"iconContainer\" onClick={()=>{setFullscreen(true)}}>\n      <img src={fullscreen} alt=\"fullscreen\"/>\n    </span>\n  }\n\n  return (\n    <>\n      <div style={{display: renderLanding()}}>\n        {landingHTML}\n        <Rodal \n          visible={modalVisible} \n          onClose={()=>setModalVisible(false)} \n          width={20} \n          height={5} \n          measure={'em'}\n          closeOnEsc={true}\n        >\n          <div>{modalMessage}</div>\n        </Rodal>\n        {incomingCall}\n      </div>\n      <div className=\"callContainer\" style={{display: renderCall()}}>\n        <Suspense fallback={<div>Loading...</div>}>\n          <Watermark/>\n        </Suspense>\n        <div className=\"partnerVideoContainer\">\n          {PartnerVideo}\n        </div>\n        <div className=\"userVideoContainer\">\n          {UserVideo}\n        </div>\n        <div className=\"controlsContainer flex\">\n          {audioControl}\n          {videoControl}\n          {screenShare}\n          {fullscreenButton}\n          {hangUp}\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}